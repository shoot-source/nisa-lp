<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="NISAをゼロから理解し、主要インデックス（S&P500/オルカン等）と始め方、積立シミュレーションまで。" />
  <title>NISA UNLEASHED | ガイド</title>
  
  <!-- Google Fonts for Brutalist Typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* =========================
         NEO-BRUTALISM PALETTE
         ========================= */
      --bg: #f2f2f2;
      --paper: #ffffff;
      --ink: #000000;
      
      /* High Voltage Accents */
      --accent-lime: #ccff00;
      --accent-pink: #ff00ff;
      --accent-cyan: #00ffff;
      --accent-yellow: #fffa00;
      --accent-orange: #ff5e00;

      --border-width: 3px;
      --shadow-offset: 6px;
      
      --font-head: 'Archivo Black', sans-serif;
      --font-body: 'Space Grotesk', sans-serif;

      --max: 1100px;
      --pad: clamp(20px, 4vw, 40px);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    
    body{
      margin:0;
      color: var(--ink);
      background-color: var(--bg);
      font-family: var(--font-body);
      overflow-x:hidden;
      /* Dot grid background */
      background-image: radial-gradient(var(--ink) 1px, transparent 1px);
      background-size: 24px 24px;
    }

    a{ color:inherit; text-decoration:none; }
    
    /* Typography Overrides */
    h1, h2, h3{ font-family: var(--font-head); text-transform: uppercase; line-height: 0.9; color: var(--ink); }
    h1{ font-size: clamp(48px, 11vw, 120px); letter-spacing: -0.04em; margin: 0 0 20px 0; }
    h2{ font-size: clamp(32px, 5vw, 48px); letter-spacing: -0.02em; margin: 0 0 16px 0; background: var(--ink); color: var(--paper); display: inline-block; padding: 4px 12px; transform: rotate(-1deg); }
    h3{ font-size: 24px; margin: 0 0 10px 0; }
    p{ font-size: 1.1rem; line-height: 1.6; margin-bottom: 1.2rem; font-weight: 500; }
    ul{ margin: 16px 0; padding-left: 24px; font-weight: 700; }
    li{ margin-bottom: 8px; }

    .container{ width: min(var(--max), 94vw); margin:0 auto; position: relative; z-index: 2; }

    /* =========================
       NEO-BRUTALISM COMPONENTS
       ========================= */
    
    /* Hard Card */
    .b-card{
      background: var(--paper);
      border: var(--border-width) solid var(--ink);
      box-shadow: var(--shadow-offset) var(--shadow-offset) 0px var(--ink);
      padding: var(--pad);
      transition: transform 0.1s linear, box-shadow 0.1s linear;
      position: relative;
    }
    .b-card:hover{
      transform: translate(-2px, -2px);
      box-shadow: calc(var(--shadow-offset) + 2px) calc(var(--shadow-offset) + 2px) 0px var(--ink);
    }
    .b-card.accent-lime{ background: var(--accent-lime); }
    .b-card.accent-cyan{ background: var(--accent-cyan); }
    .b-card.accent-pink{ background: var(--accent-pink); }

    /* Brutal Button */
    .btn{
      display: inline-flex; align-items: center; justify-content: center;
      padding: 16px 32px;
      font-family: var(--font-head);
      font-size: 16px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--ink);
      background: var(--paper);
      border: var(--border-width) solid var(--ink);
      box-shadow: 4px 4px 0px var(--ink);
      cursor: pointer;
      transition: all 0.1s;
      user-select: none;
      text-decoration: none;
    }
    .btn:hover{
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0px var(--ink);
      background: var(--accent-yellow);
    }
    .btn:active{
      transform: translate(4px, 4px);
      box-shadow: 0px 0px 0px var(--ink);
    }
    .btn.primary{
      background: var(--accent-pink);
      color: var(--ink);
    }
    .btn.primary:hover{ background: var(--accent-lime); }
    .btn.secondary{
      background: var(--accent-cyan);
    }

    /* Badge / Tag */
    .badge{
      display: inline-block;
      background: var(--ink);
      color: var(--paper);
      font-family: var(--font-body);
      font-weight: 700;
      font-size: 12px;
      padding: 4px 8px;
      text-transform: uppercase;
      margin-bottom: 12px;
      border: 1px solid var(--ink);
    }
    .b-card .badge { border: 2px solid var(--ink); background: var(--paper); color: var(--ink); box-shadow: 2px 2px 0 var(--ink); }

    /* ===== Header ===== */
    header{
      position: sticky; top: 0; z-index: 100;
      background: var(--paper);
      border-bottom: var(--border-width) solid var(--ink);
      padding: 12px 0;
    }
    .nav{ display: flex; justify-content: space-between; align-items: center; }
    .brand{ font-family: var(--font-head); font-size: 24px; display: flex; align-items: center; gap: 8px; }
    .brand .mark{ width: 24px; height: 24px; background: var(--accent-lime); border: 2px solid var(--ink); }
    
    .navLinks{ display: flex; gap: 16px; align-items: center; }
    .navLinks a{
      font-weight: 700; font-size: 14px; text-transform: uppercase;
      padding: 8px 12px; border: 2px solid transparent;
      transition: 0.2s;
    }
    .navLinks a:hover{
      background: var(--accent-yellow);
      border: 2px solid var(--ink);
      box-shadow: 2px 2px 0 var(--ink);
    }
    .navLinks .btn { padding: 8px 16px; font-size: 14px; }
    
    /* ===== Marquee (Kinetic) ===== */
    .marquee-wrap {
      background: var(--accent-lime);
      border-top: var(--border-width) solid var(--ink);
      border-bottom: var(--border-width) solid var(--ink);
      overflow: hidden;
      white-space: nowrap;
      padding: 12px 0;
      transform: rotate(-2deg) scale(1.05);
      margin: 40px 0;
      z-index: 1; position: relative;
    }
    .marquee-content {
      display: inline-block;
      animation: marquee 20s linear infinite;
      font-family: var(--font-head);
      font-size: 40px;
      color: var(--ink);
      text-transform: uppercase;
    }
    @keyframes marquee {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    /* ===== Hero (Updated) ===== */
    .hero{ padding: 80px 0; position: relative; overflow: hidden; }
    .heroGrid{ display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 60px; align-items: center; }
    
    /* New Hero Typography */
    .hero-type-block { position: relative; z-index: 2; }
    .hero-emblem {
      font-size: 14px; font-weight: 800; text-transform: uppercase;
      background: var(--ink); color: var(--accent-lime); padding: 8px 12px;
      display: inline-block; margin-bottom: 24px;
      transform: skew(-10deg);
      box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
    }
    
    .giant-text {
      font-size: clamp(60px, 11vw, 130px);
      line-height: 0.85;
      letter-spacing: -0.05em;
      text-transform: uppercase;
      margin-bottom: 24px;
    }
    .giant-text span { display: block; }
    .giant-text .highlight {
      color: var(--accent-pink);
      text-shadow: 4px 4px 0 var(--ink);
    }
    
    .heroLead{ 
      font-size: 1.25rem; font-weight: 700; max-width: 90%; 
      background: var(--paper); border-left: 6px solid var(--accent-lime); 
      padding: 16px 24px; margin-bottom: 32px; 
    }
    
    .heroActions{ display: flex; flex-wrap: wrap; gap: 16px; }

    /* Hero Visual - Abstract Shapes */
    .hero-visual{
      position: relative; height: 500px;
      border: var(--border-width) solid var(--ink);
      background: var(--ink); /* Inverted for impact */
      box-shadow: 16px 16px 0 var(--accent-cyan);
      display: grid; place-items: center;
      overflow: hidden;
    }
    .shape-circle{
      width: 200px; height: 200px; border-radius: 50%;
      background: var(--accent-pink); border: 3px solid var(--ink);
      position: absolute; top: -20px; right: -20px;
      animation: float 4s ease-in-out infinite;
    }
    .shape-tri{
      width: 0; height: 0; 
      border-left: 60px solid transparent; border-right: 60px solid transparent; border-bottom: 120px solid var(--accent-cyan);
      position: absolute; bottom: 40px; left: 40px;
      filter: drop-shadow(4px 4px 0 var(--ink));
      animation: float 5s ease-in-out infinite reverse;
    }
    /* Noise texture overlay */
    .hero-visual::before {
      content: ""; position: absolute; inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E");
      opacity: 0.4; pointer-events: none;
    }
    
    .hero-stat-box{
      background: var(--paper); border: 3px solid var(--ink); padding: 30px;
      box-shadow: 12px 12px 0 var(--accent-yellow);
      transform: rotate(3deg);
      z-index: 2;
      text-align: center;
      min-width: 280px;
    }
    .hero-stat-box .v{ font-family: var(--font-head); font-size: 40px; line-height: 1; }

    @keyframes float { 0%,100%{transform: translate(0,0);} 50%{transform: translate(0, -20px);} }

    /* ===== Grids ===== */
    .grid2{ display: grid; grid-template-columns: 1fr 1fr; gap: 32px; }
    .grid3{ display: grid; grid-template-columns: repeat(3, 1fr); gap: 32px; }
    
    /* ===== Steps (Timeline) Brutalized ===== */
    .flowWrap { padding: 40px 0; }
    .timeline { display: grid; gap: 24px; position: relative; }
    /* Vertical line */
    .timeline::before {
      content: ""; position: absolute; left: 28px; top: 0; bottom: 0; width: 4px; background: var(--ink);
      z-index: 0;
    }

    .tItem { display: grid; grid-template-columns: 60px 1fr; gap: 20px; position: relative; z-index: 1; }
    .nodeBadge {
      width: 60px; height: 60px; background: var(--accent-lime); border: 3px solid var(--ink);
      display: grid; place-items: center; font-family: var(--font-head); font-size: 28px;
      box-shadow: 4px 4px 0 var(--ink);
    }
    .tCard {
      background: var(--paper); border: 3px solid var(--ink); padding: 24px;
      box-shadow: 6px 6px 0 var(--ink);
      transition: transform 0.2s, background 0.2s;
    }
    .tCard::before {
      content:""; position: absolute; left: -23px; top: 30px; width: 20px; height: 4px; background: var(--ink);
    }
    
    .tItem.active .nodeBadge { background: var(--accent-pink); transform: scale(1.1); transition: 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    .tItem.active .tCard { background: var(--accent-yellow); transform: translateX(10px); }

    /* ===== Simulation Brutalized ===== */
    .simWrap {
      border: var(--border-width) solid var(--ink);
      background: var(--paper);
      padding: 32px;
      box-shadow: 12px 12px 0 var(--ink);
    }
    .simGrid { display: grid; grid-template-columns: 0.8fr 1.2fr; gap: 40px; }
    
    /* Inputs */
    .field { margin-bottom: 24px; }
    .label { font-weight: 700; margin-bottom: 8px; display: block; text-transform: uppercase; border-bottom: 2px solid var(--ink); padding-bottom: 4px; display: inline-block;}
    .valuePill { float: right; background: var(--ink); color: var(--accent-lime); padding: 2px 8px; font-family: var(--font-head); }
    
    input[type="range"] {
      -webkit-appearance: none; width: 100%; height: 12px; background: var(--ink);
      border-radius: 999px; outline: none; margin-top: 10px;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none; appearance: none;
      width: 24px; height: 24px; background: var(--accent-pink);
      border: 2px solid var(--ink); cursor: pointer;
      box-shadow: 2px 2px 0 var(--paper);
    }
    
    .miniBtn {
      background: transparent; border: 2px solid var(--ink); padding: 6px 12px;
      font-weight: 700; cursor: pointer; margin-right: 8px; margin-top: 8px;
      box-shadow: 2px 2px 0 var(--ink);
      font-family: var(--font-body);
      transition: transform 0.1s;
    }
    .miniBtn:hover { background: var(--ink); color: var(--paper); transform: translate(-1px,-1px); }

    .results { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; border-top: 3px solid var(--ink); padding-top: 20px; margin-top: 20px; }
    .resCard { text-align: right; background: #eee; border: 2px solid var(--ink); padding: 10px; }
    .resK { font-size: 12px; font-weight: 700; color: #555; text-transform: uppercase; }
    .resV { font-family: var(--font-head); font-size: 28px; line-height: 1; color: var(--ink); }

    canvas {
      border: 3px solid var(--ink);
      background: #fff;
      box-shadow: 6px 6px 0 var(--ink);
      width: 100%; height: 350px;
    }

    /* ===== FAQ Brutalized ===== */
    .faqItem {
      border: 3px solid var(--ink); background: var(--paper); margin-bottom: 16px;
      box-shadow: 4px 4px 0 var(--ink);
      transition: 0.2s;
    }
    .faqBtn {
      width: 100%; padding: 20px; border: none; background: transparent;
      display: flex; justify-content: space-between; align-items: center;
      font-family: var(--font-body); font-weight: 700; font-size: 18px;
      cursor: pointer; text-align: left;
    }
    .faqIcon { font-size: 24px; font-weight: 900; }
    .faqBody {
      height: 0; overflow: hidden; transition: height 0.3s ease;
      background: var(--accent-lime); border-top: 3px solid var(--ink);
    }
    .faqInner { padding: 20px; font-weight: 500; }
    .faqItem.open .faqIcon { transform: rotate(45deg); }
    .faqItem.open { box-shadow: 2px 2px 0 var(--ink); transform: translate(2px,2px); }

    /* ===== Footer ===== */
    footer{
      background: var(--ink); color: var(--paper); padding: 60px 0; margin-top: 80px;
      text-align: center; font-family: var(--font-head);
    }

    /* ===== Responsive ===== */
    @media (max-width: 900px) {
      .heroGrid, .simGrid, .grid2, .grid3 { grid-template-columns: 1fr; }
      h1 { font-size: 60px; line-height: 0.9; }
      .giant-text { font-size: 60px; }
      .navLinks { display: none; } /* Hide nav on mobile for simplicity in this demo */
      .menuBtn { display: block; border: 2px solid var(--ink); background: var(--paper); padding: 8px; cursor: pointer; box-shadow: 3px 3px 0 var(--ink);}
      .menuIcon span { display: block; width: 24px; height: 3px; background: var(--ink); margin: 4px 0; }
    }
    @media (min-width: 901px) {
      .menuBtn { display: none; }
    }

    /* Utility */
    section { padding: 60px 0; border-bottom: 2px dashed var(--ink); }
    
    /* Loader Brutal */
    .loader {
      position: fixed; inset: 0; z-index: 9999;
      background: var(--accent-yellow);
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      transition: transform 0.4s cubic-bezier(0.8, 0, 0.2, 1);
      border: 10px solid var(--ink);
    }
    .loader.hidden { transform: translateY(-100%); }
    .loader-text { font-family: var(--font-head); font-size: 60px; color: var(--ink); text-transform: uppercase; animation: blink 0.5s infinite; }
    @keyframes blink { 50% { opacity: 0; } }

  </style>
</head>

<body>

  <!-- Brutal Loader -->
  <div class="loader" id="loader">
    <div class="loader-text">LOADING...</div>
    <div style="font-family: var(--font-body); font-weight: 700; margin-top: 20px;">INITIALIZING BRUTAL MODE</div>
  </div>

  <header>
    <div class="container">
      <nav class="nav">
        <a href="#top" class="brand">
          <div class="mark"></div>
          <span>NISA UNLEASHED</span>
        </a>
        <div class="navLinks">
          <a href="#what">NISAとは</a>
          <a href="#basics">メリット</a>
          <a href="#funds">銘柄</a>
          <a href="#steps">始め方</a>
          <a href="#sim">シミュレーション</a>
          <a class="btn primary" href="#links">今すぐ始める</a>
        </div>
        <button class="menuBtn" type="button" id="openMenu">
          <span class="menuIcon"><span></span><span></span><span></span></span>
        </button>
      </nav>
    </div>
  </header>

  <!-- Kinetic Marquee -->
  <div class="marquee-wrap">
    <div class="marquee-content">
      EMOTION IS TRASH • SYSTEM IS KING • DON'T THINK • JUST STACK • COMPOUND INTEREST • TAX FREE • LONG TERM • EMOTION IS TRASH • SYSTEM IS KING • DON'T THINK • JUST STACK •
    </div>
  </div>

  <main>
    <!-- HERO (UPDATED) -->
    <section class="hero" id="top">
      <div class="container">
        <div class="heroGrid">
          <div class="hero-type-block">
            <div class="hero-emblem">FOR BEGINNERS</div>
            <h1 class="giant-text">
              感情を捨てろ。<br>
              <span class="highlight">仕組み</span>で勝て。
            </h1>
            <div class="heroLead">
              投資で一番の敵は「あなたの迷い」だ。<br>
              NISAは非課税の最強装備。<br>
              さっさと設定して、あとは寝て待て。
            </div>
            <div class="heroActions">
              <a class="btn primary" href="#links">口座開設へ進む</a>
              <a class="btn secondary" href="#steps">6ステップを見る</a>
            </div>
          </div>

          <div class="hero-visual">
            <div class="shape-circle"></div>
            <div class="shape-tri"></div>
            <div class="hero-stat-box">
              <div class="k" style="font-weight: 700; font-size: 14px; letter-spacing: 0.1em; color: #555;">GAIN</div>
              <div class="v" style="color: var(--ink);">UNLIMITED</div>
              <div class="k" style="font-weight: 700; margin-top: 10px; font-size: 14px; letter-spacing: 0.1em; color: #555;">TAX</div>
              <div class="v" style="color: var(--accent-pink); font-size: 60px;">0%</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- WHAT -->
    <section id="what">
      <div class="container">
        <h2>What is NISA?</h2>
        <p style="font-size: 1.5rem; max-width: 800px; border-left: 5px solid var(--accent-pink); padding-left: 20px;">
          NISAは「投資の利益が非課税になる制度」。<br>
          ただの「箱」だと思っていい。
        </p>

        <div class="grid3" style="margin-top: 40px;">
          <div class="b-card">
            <div class="badge">Benefit</div>
            <h3>税金ゼロ</h3>
            <p>通常は利益の約20%が税金で取られる。NISAならそれが全部自分のものになる。長期間やるほど、この差はデカくなる。</p>
          </div>
          <div class="b-card">
            <div class="badge">Easy</div>
            <h3>中身を選ぶだけ</h3>
            <p>NISAという「箱」を作って、その中に「投資信託」などを入れるイメージ。順番は「箱作り」→「中身選び」だ。</p>
          </div>
          <div class="b-card">
            <div class="badge">Auto</div>
            <h3>完全自動化</h3>
            <p>一度設定すれば、毎月勝手に積み立ててくれる。「買い忘れた」「高値で掴んだ」という感情のブレを排除できる。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- BASICS -->
    <section id="basics" style="background: var(--ink); color: var(--paper);">
      <div class="container">
        <h2 style="background: var(--paper); color: var(--ink);">Basics & Warnings</h2>
        
        <div class="grid2" style="margin-top: 40px;">
          <div class="b-card accent-lime">
            <div class="badge">MERIT</div>
            <h3>長期 × 複利のパワー</h3>
            <p>利益が非課税になることで、再投資の効果（複利）が最大化される。時間は武器だ。10年、20年と続けることで、雪だるま式に増える可能性が高まる。</p>
          </div>
          
          <div class="b-card accent-cyan">
            <div class="badge">WARNING</div>
            <h3>元本割れのリスク</h3>
            <p>投資だ。当然減ることもある。「必ず増える」なんて詐欺師のセリフだ。だからこそ「生活防衛資金」は確保し、「余剰資金」でやるのが鉄則。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- FUNDS -->
    <section id="funds">
      <div class="container">
        <h2>Top Picks</h2>
        <p>迷ったらこの2択。「個別株」なんてギャンブルは後回しだ。</p>

        <div class="grid2" style="margin-top: 30px;">
          <div class="b-card">
            <h3 style="background: var(--ink); color: var(--paper); padding: 4px 8px; display: inline-block;">S&P500</h3>
            <p style="font-size: 1.2rem; margin-top: 10px; font-weight: 700;">米国最強の500社</p>
            <p>Apple, Google, Amazon... 世界を牛耳るアメリカ企業にまとめて投資。アメリカの成長を信じるならこれ一択。</p>
            <div class="badge">ハイリターン</div>
          </div>

          <div class="b-card">
            <h3 style="background: var(--ink); color: var(--paper); padding: 4px 8px; display: inline-block;">オルカン</h3>
            <p style="font-size: 1.2rem; margin-top: 10px; font-weight: 700;">全世界株式 (All Country)</p>
            <p>アメリカも含めた世界中の企業に分散投資。「どこの国が勝つかわからないから全部買う」という守りの最強戦略。</p>
            <div class="badge">最大分散</div>
          </div>
        </div>
      </div>
    </section>

    <!-- STEPS -->
    <section id="steps" style="background: var(--accent-yellow);">
      <div class="container">
        <h2>Roadmap to Start</h2>
        
        <div class="flowWrap">
          <div class="timeline" id="timeline">
            
            <div class="tItem">
              <div class="nodeBadge">1</div>
              <div class="tCard">
                <h3>証券会社を選ぶ</h3>
                <p>迷ったら「SBI証券」か「楽天証券」。手数料が安く、使いやすい。この2強なら間違いはない。</p>
              </div>
            </div>

            <div class="tItem">
              <div class="nodeBadge">2</div>
              <div class="tCard">
                <h3>口座開設</h3>
                <p>スマホとマイナンバーカードがあればすぐ終わる。「NISA口座も同時に申し込む」にチェックを入れるのを忘れるな。</p>
              </div>
            </div>

            <div class="tItem">
              <div class="nodeBadge">3</div>
              <div class="tCard">
                <h3>積立額を決める</h3>
                <p>月100円からでもできる。最初は「月3万円」とか無理のない範囲で。生活費を削ってまでやるな。</p>
              </div>
            </div>

            <div class="tItem">
              <div class="nodeBadge">4</div>
              <div class="tCard">
                <h3>銘柄購入・設定</h3>
                <p>「オルカン」か「S&P500」を選び、「積立注文」をする。クレジットカード払いにすればポイントもつく。</p>
              </div>
            </div>

            <div class="tItem">
              <div class="nodeBadge">5</div>
              <div class="tCard accent-pink">
                <h3>放置する</h3>
                <p>設定が終わったら、パスワードを忘れるくらい放置しろ。日々の値動きを見るな。気絶している奴が一番儲かる。</p>
              </div>
            </div>

          </div>
        </div>
      </div>
    </section>

    <!-- SIMULATION (UPDATED X-AXIS FIXED) -->
    <section id="sim">
      <div class="container">
        <h2>Simulation</h2>
        <p>「貯金だけ」vs「投資」。横軸は最大40年。長く続けるインパクトを見ろ。</p>

        <div class="simWrap">
          <div class="simGrid">
            <div class="simPanel">
              <div class="field">
                <span class="label">積立額 (月)</span>
                <span class="valuePill" id="mLabel">30,000 円</span>
                <input id="mRange" type="range" min="5000" max="200000" step="1000" value="30000" />
                <div class="presetRow">
                  <button class="miniBtn" data-target="m" data-preset="30000">3万</button>
                  <button class="miniBtn" data-target="m" data-preset="50000">5万</button>
                  <button class="miniBtn" data-target="m" data-preset="100000">10万</button>
                </div>
              </div>

              <div class="field">
                <span class="label">期間 (年)</span>
                <span class="valuePill" id="yLabel">20 年</span>
                <input id="yRange" type="range" min="1" max="40" step="1" value="20" />
                <div class="presetRow">
                  <button class="miniBtn" data-target="y" data-preset="10">10年</button>
                  <button class="miniBtn" data-target="y" data-preset="20">20年</button>
                  <button class="miniBtn" data-target="y" data-preset="30">30年</button>
                </div>
              </div>

              <div class="field">
                <span class="label">年利 (想定)</span>
                <span class="valuePill" id="rLabel">5.0 %</span>
                <input id="rRange" type="range" min="0" max="10" step="0.1" value="5" />
                <div class="presetRow">
                  <button class="miniBtn" data-target="r" data-preset="3">3%</button>
                  <button class="miniBtn" data-target="r" data-preset="5">5%</button>
                  <button class="miniBtn" data-target="r" data-preset="7">7%</button>
                </div>
              </div>

              <div class="results">
                <div class="resCard">
                  <div class="resK">元本 (貯金)</div>
                  <div class="resV" id="saveFinal">---</div>
                </div>
                <div class="resCard" style="background: var(--accent-lime);">
                  <div class="resK">運用結果</div>
                  <div class="resV" id="invFinal">---</div>
                </div>
                <div class="resCard" style="grid-column: span 2; background: var(--ink); color: var(--paper);">
                  <div class="resK" style="color: #bbb;">差額 (利益)</div>
                  <div class="resV" style="color: var(--accent-yellow);" id="diffFinal">---</div>
                </div>
              </div>
            </div>

            <div class="chartWrap">
              <canvas id="chart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" style="background: var(--accent-cyan);">
      <div class="container">
        <h2>FAQ</h2>
        
        <div class="faqWrap" id="faqWrap">
          <div class="faqItem">
            <button class="faqBtn">
              <span class="faqQ">Q. 損する？</span>
              <span class="faqIcon">+</span>
            </button>
            <div class="faqBody"><div class="faqInner">A. する時はする。リーマンショック級が来れば一時的に半値になることもある。でも過去の歴史では15〜20年持てばプラスに収束している。だから「長期」なんだ。</div></div>
          </div>
          <div class="faqItem">
            <button class="faqBtn">
              <span class="faqQ">Q. いつ始めるべき？</span>
              <span class="faqIcon">+</span>
            </button>
            <div class="faqBody"><div class="faqInner">A. 今すぐだ。相場を読むな。「安くなったら買おう」と思っているうちに置いていかれるのがオチだ。時間は味方につけたもん勝ち。</div></div>
          </div>
          <div class="faqItem">
            <button class="faqBtn">
              <span class="faqQ">Q. 銀行の窓口で相談していい？</span>
              <span class="faqIcon">+</span>
            </button>
            <div class="faqBody"><div class="faqInner">A. 絶対にやめろ。彼らは手数料の高いボッタクリ商品を売りつけてくる。ネット証券で自分でポチポチやるのが正解だ。</div></div>
          </div>
        </div>
      </div>
    </section>

    <!-- LINKS -->
    <section id="links" style="border-bottom: none;">
      <div class="container">
        <h2>Action</h2>
        <p>さあ、選べ。</p>

        <div class="grid2">
          <a href="https://go.sbisec.co.jp/account/sogoflow_01.html" target="_blank" class="b-card accent-pink" style="text-decoration: none; color: inherit; display: block;">
            <div class="badge">RECOMMEND</div>
            <h3>SBI証券</h3>
            <p>業界最大手。迷ったらここにしておけ。</p>
            <div class="btn" style="margin-top: 20px; width: 100%;">公式サイトへ GO</div>
          </a>

          <a href="https://www.rakuten-sec.co.jp/web/account/" target="_blank" class="b-card accent-orange" style="text-decoration: none; color: inherit; display: block;">
            <div class="badge">POINTS</div>
            <h3>楽天証券</h3>
            <p>楽天経済圏ならここ一択。画面が見やすい。</p>
            <div class="btn" style="margin-top: 20px; width: 100%;">公式サイトへ GO</div>
          </a>
        </div>
      </div>
    </section>

    <footer>
      <div class="container">
        <div>© NISA UNLEASHED.</div>
        <div style="font-size: 0.8rem; margin-top: 10px; opacity: 0.7;">投資は自己責任で。このサイトの情報で損しても知らん。</div>
      </div>
    </footer>
  </main>

  <script>
    // Smooth scroll
    document.documentElement.style.scrollBehavior = "smooth";

    // Brutal Loader Fadeout
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loader').classList.add('hidden');
      }, 800);
      
      initFaq();
      updateSim();
    });

    // ===== Simulation Logic (Updated: X-Axis Fixed + Labels) =====
    const mRange = document.getElementById("mRange");
    const yRange = document.getElementById("yRange");
    const rRange = document.getElementById("rRange");
    const labels = {
      m: document.getElementById("mLabel"),
      y: document.getElementById("yLabel"),
      r: document.getElementById("rLabel")
    };
    const results = {
      save: document.getElementById("saveFinal"),
      inv: document.getElementById("invFinal"),
      diff: document.getElementById("diffFinal")
    };
    const canvas = document.getElementById("chart");
    const ctx = canvas.getContext("2d");
    
    // Constant for Max Years (X-Axis Fix)
    const MAX_YEARS = 40;

    function formatJPY(n) {
      return Math.round(n).toLocaleString("ja-JP") + "円";
    }

    function calcSeries(monthly, years, rate) {
      const months = years * 12;
      const r = rate / 100 / 12;
      let save = 0, inv = 0;
      const S = [], I = [];
      
      for(let i=0; i<=months; i++) {
        S.push(save);
        I.push(inv);
        save += monthly;
        inv = (inv + monthly) * (1 + r);
        if(i===0) inv = 0; // reset start
      }
      return { S, I, saveFinal: save, invFinal: inv };
    }

    function drawChart(S, I) {
      // Resize
      const rect = canvas.getBoundingClientRect();
      canvas.width = rect.width;
      canvas.height = rect.height;
      
      const w = canvas.width;
      const h = canvas.height;
      const padLeft = 60; // Increased padding for Y axis labels
      const padBottom = 40;
      const padTop = 20;
      const padRight = 20;
      
      // Clear
      ctx.fillStyle = "#ffffff";
      ctx.fillRect(0,0,w,h);
      
      // Calculate Axis Scale
      const maxVal = Math.max(S[S.length-1], I[I.length-1]) * 1.1; 
      const totalMonths = MAX_YEARS * 12;

      // Draw Grid & Y-Axis Labels
      ctx.beginPath();
      ctx.strokeStyle = "#ddd";
      ctx.lineWidth = 1;
      ctx.fillStyle = "#666";
      ctx.font = "10px 'Space Grotesk', sans-serif";
      ctx.textAlign = "right";
      ctx.textBaseline = "middle";

      const gridLines = 5;
      for(let i=0; i<=gridLines; i++){
        const val = (maxVal * i) / gridLines;
        const y = h - padBottom - (val / maxVal) * (h - padBottom - padTop);
        
        // Grid Line
        ctx.moveTo(padLeft, y);
        ctx.lineTo(w-padRight, y);

        // Label (Compact format: 1000万円 -> 1000万)
        let labelText = "";
        if(val >= 100000000) {
           labelText = (val / 100000000).toFixed(1) + "億円";
        } else if (val >= 10000) {
           labelText = Math.round(val / 10000) + "万";
        } else {
           labelText = val;
        }
        ctx.fillText(labelText, padLeft - 8, y);
      }
      ctx.stroke();

      // Draw X-Axis Labels (10 Year intervals)
      ctx.fillStyle = "#666";
      ctx.textAlign = "center";
      ctx.textBaseline = "top";
      for(let yr=0; yr<=MAX_YEARS; yr+=10) {
        if(yr === 0) continue; // Skip 0 year
        const x = padLeft + ( (yr * 12) / totalMonths ) * (w - padLeft - padRight);
        const y = h - padBottom + 8;
        ctx.fillText(yr + "年", x, y);
        
        // Small tick
        ctx.beginPath();
        ctx.strokeStyle = "#ccc";
        ctx.moveTo(x, h - padBottom);
        ctx.lineTo(x, h - padBottom + 5);
        ctx.stroke();
      }

      // Draw Lines
      function drawLine(arr, color, width, dash) {
        ctx.beginPath();
        ctx.strokeStyle = color;
        ctx.lineWidth = width;
        if(dash) ctx.setLineDash(dash);
        else ctx.setLineDash([]);
        
        for(let i=0; i<arr.length; i++) {
          const x = padLeft + (i / totalMonths) * (w - padLeft - padRight);
          const y = h - padBottom - (arr[i] / maxVal) * (h - padBottom - padTop);
          if(i===0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        }
        ctx.stroke();
      }

      // Savings (Black Dotted)
      drawLine(S, "#000", 3, [5, 5]);
      
      // Investment (Pink Solid)
      drawLine(I, "#ff00ff", 5, []);
      
      // End Points
      const lastIdx = S.length-1;
      const xEnd = padLeft + (lastIdx / totalMonths) * (w - padLeft - padRight);
      
      const yS = h - padBottom - (S[lastIdx] / maxVal) * (h - padBottom - padTop);
      const yI = h - padBottom - (I[lastIdx] / maxVal) * (h - padBottom - padTop);
      
      // Draw big square dots at the end
      ctx.fillStyle = "#000";
      ctx.fillRect(xEnd-6, yS-6, 12, 12);
      
      ctx.fillStyle = "#ccff00"; // Lime fill
      ctx.strokeStyle = "#000";
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.rect(xEnd-8, yI-8, 16, 16);
      ctx.fill();
      ctx.stroke();
      
      // Current Year Vertical Line (where the simulation stops)
      ctx.beginPath();
      ctx.strokeStyle = "#000";
      ctx.setLineDash([2, 2]);
      ctx.lineWidth = 1;
      ctx.moveTo(xEnd, padTop);
      ctx.lineTo(xEnd, h - padBottom);
      ctx.stroke();
    }

    function updateSim() {
      const m = parseInt(mRange.value);
      const y = parseInt(yRange.value);
      const r = parseFloat(rRange.value);

      labels.m.textContent = m.toLocaleString() + " 円";
      labels.y.textContent = y + " 年";
      labels.r.textContent = r + " %";

      const data = calcSeries(m, y, r);
      
      results.save.textContent = formatJPY(data.saveFinal);
      results.inv.textContent = formatJPY(data.invFinal);
      results.diff.textContent = "+" + formatJPY(data.invFinal - data.saveFinal);

      drawChart(data.S, data.I);
    }

    [mRange, yRange, rRange].forEach(el => el.addEventListener('input', updateSim));
    window.addEventListener('resize', updateSim);

    // Presets
    document.querySelectorAll('[data-preset]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const tgt = e.target.dataset.target;
        const val = e.target.dataset.preset;
        if(tgt === 'm') mRange.value = val;
        if(tgt === 'y') yRange.value = val;
        if(tgt === 'r') rRange.value = val;
        updateSim();
      });
    });

    // ===== FAQ Logic =====
    function initFaq() {
      document.querySelectorAll('.faqBtn').forEach(btn => {
        btn.addEventListener('click', () => {
          const item = btn.parentElement;
          item.classList.toggle('open');
          const body = item.querySelector('.faqBody');
          if(item.classList.contains('open')) {
            body.style.height = body.scrollHeight + 'px';
          } else {
            body.style.height = '0';
          }
        });
      });
    }

    // ===== Mobile Menu =====
    const menuBtn = document.getElementById('openMenu');
    menuBtn.addEventListener('click', () => {
      const links = document.querySelector('.navLinks');
      if(links.style.display === 'flex') {
        links.style.display = 'none';
      } else {
        links.style.display = 'flex';
        links.style.flexDirection = 'column';
        links.style.position = 'absolute';
        links.style.top = '100%';
        links.style.right = '0';
        links.style.background = 'var(--paper)';
        links.style.border = '3px solid var(--ink)';
        links.style.padding = '20px';
        links.style.boxShadow = '6px 6px 0 var(--ink)';
      }
    });

    // Timeline Scroll Highlight
    const tItems = document.querySelectorAll('.tItem');
    window.addEventListener('scroll', () => {
      const trigger = window.innerHeight * 0.6;
      tItems.forEach(item => {
        const top = item.getBoundingClientRect().top;
        if(top < trigger) item.classList.add('active');
        else item.classList.remove('active');
      });
    });

  </script>
</body>
</html>